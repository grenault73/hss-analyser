!function(n){var r={};function i(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,i),e.l=!0,e.exports}i.m=n,i.c=r,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=36)}([function(e,t,u){(function(){var n,r,o,p,s,a,i,c,f,d,y,t,m={}.hasOwnProperty;t=u(1),y=t.isObject,d=t.isFunction,f=t.isEmpty,a=c=i=p=o=r=n=s=null,e.exports=function(){function t(t){this.parent=t,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.children=[],s||(s=u(2),n=u(3),r=u(4),o=u(5),p=u(6),i=u(11),c=u(12),a=u(13))}return t.prototype.element=function(t,e,n){var r,i,o,s,a,c,u,l,p,h;if((c=null)==e&&(e={}),e=e.valueOf(),y(e)||(n=(p=[e,n])[0],e=p[1]),null!=t&&(t=t.valueOf()),Array.isArray(t))for(o=0,u=t.length;o<u;o++)i=t[o],c=this.element(i);else if(d(t))c=this.element(t.apply());else if(y(t)){for(a in t)if(m.call(t,a))if(h=t[a],d(h)&&(h=h.apply()),y(h)&&f(h)&&(h=null),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&0===a.indexOf(this.stringify.convertAttKey))c=this.attribute(a.substr(this.stringify.convertAttKey.length),h);else if(!this.options.separateArrayItems&&Array.isArray(h))for(s=0,l=h.length;s<l;s++)i=h[s],(r={})[a]=i,c=this.element(r);else y(h)?(c=this.element(a)).element(h):c=this.element(a,h)}else c=!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===t.indexOf(this.stringify.convertTextKey)?this.text(n):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&0===t.indexOf(this.stringify.convertCDataKey)?this.cdata(n):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&0===t.indexOf(this.stringify.convertCommentKey)?this.comment(n):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&0===t.indexOf(this.stringify.convertRawKey)?this.raw(n):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&0===t.indexOf(this.stringify.convertPIKey)?this.instruction(t.substr(this.stringify.convertPIKey.length),n):this.node(t,e,n);if(null==c)throw new Error("Could not create any elements with: "+t);return c},t.prototype.insertBefore=function(t,e,n){var r,i,o;if(this.isRoot)throw new Error("Cannot insert elements at root level");return i=this.parent.children.indexOf(this),o=this.parent.children.splice(i),r=this.parent.element(t,e,n),Array.prototype.push.apply(this.parent.children,o),r},t.prototype.insertAfter=function(t,e,n){var r,i,o;if(this.isRoot)throw new Error("Cannot insert elements at root level");return i=this.parent.children.indexOf(this),o=this.parent.children.splice(i+1),r=this.parent.element(t,e,n),Array.prototype.push.apply(this.parent.children,o),r},t.prototype.remove=function(){var t;if(this.isRoot)throw new Error("Cannot remove the root element");return t=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[t,t-t+1].concat([])),this.parent},t.prototype.node=function(t,e,n){var r,i;return null!=t&&(t=t.valueOf()),e||(e={}),e=e.valueOf(),y(e)||(n=(i=[e,n])[0],e=i[1]),r=new s(this,t,e),null!=n&&r.text(n),this.children.push(r),r},t.prototype.text=function(t){var e;return e=new c(this,t),this.children.push(e),this},t.prototype.cdata=function(t){var e;return e=new n(this,t),this.children.push(e),this},t.prototype.comment=function(t){var e;return e=new r(this,t),this.children.push(e),this},t.prototype.commentBefore=function(t){var e,n;return e=this.parent.children.indexOf(this),n=this.parent.children.splice(e),this.parent.comment(t),Array.prototype.push.apply(this.parent.children,n),this},t.prototype.commentAfter=function(t){var e,n;return e=this.parent.children.indexOf(this),n=this.parent.children.splice(e+1),this.parent.comment(t),Array.prototype.push.apply(this.parent.children,n),this},t.prototype.raw=function(t){var e;return e=new i(this,t),this.children.push(e),this},t.prototype.instruction=function(t,e){var n,r,i,o,s;if(null!=t&&(t=t.valueOf()),null!=e&&(e=e.valueOf()),Array.isArray(t))for(o=0,s=t.length;o<s;o++)n=t[o],this.instruction(n);else if(y(t))for(n in t)m.call(t,n)&&(r=t[n],this.instruction(n,r));else d(e)&&(e=e.apply()),i=new a(this,t,e),this.children.push(i);return this},t.prototype.instructionBefore=function(t,e){var n,r;return n=this.parent.children.indexOf(this),r=this.parent.children.splice(n),this.parent.instruction(t,e),Array.prototype.push.apply(this.parent.children,r),this},t.prototype.instructionAfter=function(t,e){var n,r;return n=this.parent.children.indexOf(this),r=this.parent.children.splice(n+1),this.parent.instruction(t,e),Array.prototype.push.apply(this.parent.children,r),this},t.prototype.declaration=function(t,e,n){var r,i;return r=this.document(),i=new o(r,t,e,n),r.children[0]instanceof o?r.children[0]=i:r.children.unshift(i),r.root()||r},t.prototype.doctype=function(t,e){var n,r,i,o,s,a,c,u,l;for(n=this.document(),r=new p(n,t,e),i=o=0,a=(u=n.children).length;o<a;i=++o)if(u[i]instanceof p)return n.children[i]=r;for(i=s=0,c=(l=n.children).length;s<c;i=++s)if(l[i].isRoot)return n.children.splice(i,0,r),r;return n.children.push(r),r},t.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},t.prototype.root=function(){var t;for(t=this;t;){if(t.isDocument)return t.rootObject;if(t.isRoot)return t;t=t.parent}},t.prototype.document=function(){var t;for(t=this;t;){if(t.isDocument)return t;t=t.parent}},t.prototype.end=function(t){return this.document().end(t)},t.prototype.prev=function(){var t;if((t=this.parent.children.indexOf(this))<1)throw new Error("Already at the first node");return this.parent.children[t-1]},t.prototype.next=function(){var t;if(-1===(t=this.parent.children.indexOf(this))||t===this.parent.children.length-1)throw new Error("Already at the last node");return this.parent.children[t+1]},t.prototype.importDocument=function(t){var e;return(e=t.root().clone()).parent=this,e.isRoot=!1,this.children.push(e),this},t.prototype.ele=function(t,e,n){return this.element(t,e,n)},t.prototype.nod=function(t,e,n){return this.node(t,e,n)},t.prototype.txt=function(t){return this.text(t)},t.prototype.dat=function(t){return this.cdata(t)},t.prototype.com=function(t){return this.comment(t)},t.prototype.ins=function(t,e){return this.instruction(t,e)},t.prototype.doc=function(){return this.document()},t.prototype.dec=function(t,e,n){return this.declaration(t,e,n)},t.prototype.dtd=function(t,e){return this.doctype(t,e)},t.prototype.e=function(t,e,n){return this.element(t,e,n)},t.prototype.n=function(t,e,n){return this.node(t,e,n)},t.prototype.t=function(t){return this.text(t)},t.prototype.d=function(t){return this.cdata(t)},t.prototype.c=function(t){return this.comment(t)},t.prototype.r=function(t){return this.raw(t)},t.prototype.i=function(t,e){return this.instruction(t,e)},t.prototype.u=function(){return this.up()},t.prototype.importXMLBuilder=function(t){return this.importDocument(t)},t}()}).call(this)},function(o,t){(function(){var t,n,e,s,r,i,a=[].slice,c={}.hasOwnProperty;t=function(){var t,e,n,r,i,o;if(o=arguments[0],i=2<=arguments.length?a.call(arguments,1):[],s(Object.assign))Object.assign.apply(null,arguments);else for(t=0,n=i.length;t<n;t++)if(null!=(r=i[t]))for(e in r)c.call(r,e)&&(o[e]=r[e]);return o},s=function(t){return!!t&&"[object Function]"===Object.prototype.toString.call(t)},r=function(t){var e;return!!t&&("function"==(e=typeof t)||"object"===e)},n=function(t){return s(Array.isArray)?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)},e=function(t){var e;if(n(t))return!t.length;for(e in t)if(c.call(t,e))return!1;return!0},i=function(t){var e,n;return r(t)&&(n=Object.getPrototypeOf(t))&&(e=n.constructor)&&"function"==typeof e&&e instanceof e&&Function.prototype.toString.call(e)===Function.prototype.toString.call(Object)},o.exports.assign=t,o.exports.isFunction=s,o.exports.isObject=r,o.exports.isArray=n,o.exports.isEmpty=e,o.exports.isPlainObject=i}).call(this)},function(n,t,r){(function(){var i,e,o,s,t,a={}.hasOwnProperty;t=r(1),s=t.isObject,o=t.isFunction,e=r(0),i=r(16),n.exports=function(t){function r(t,e,n){if(r.__super__.constructor.call(this,t),null==e)throw new Error("Missing element name");this.name=this.stringify.eleName(e),this.attributes={},null!=n&&this.attribute(n),t.isDocument&&(this.isRoot=!0,(this.documentObject=t).rootObject=this)}return function(t,e){for(var n in e)a.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(r,e),r.prototype.clone=function(){var t,e,n,r;for(e in(n=Object.create(this)).isRoot&&(n.documentObject=null),n.attributes={},r=this.attributes)a.call(r,e)&&(t=r[e],n.attributes[e]=t.clone());return n.children=[],this.children.forEach(function(t){var e;return((e=t.clone()).parent=n).children.push(e)}),n},r.prototype.attribute=function(t,e){var n,r;if(null!=t&&(t=t.valueOf()),s(t))for(n in t)a.call(t,n)&&(r=t[n],this.attribute(n,r));else o(e)&&(e=e.apply()),this.options.skipNullAttributes&&null==e||(this.attributes[t]=new i(this,t,e));return this},r.prototype.removeAttribute=function(t){var e,n,r;if(null==t)throw new Error("Missing attribute name");if(t=t.valueOf(),Array.isArray(t))for(n=0,r=t.length;n<r;n++)e=t[n],delete this.attributes[e];else delete this.attributes[t];return this},r.prototype.toString=function(t){return this.options.writer.set(t).element(this)},r.prototype.att=function(t,e){return this.attribute(t,e)},r.prototype.a=function(t,e){return this.attribute(t,e)},r}()}).call(this)},function(t,e,n){(function(){var e,i={}.hasOwnProperty;e=n(0),t.exports=function(t){function n(t,e){if(n.__super__.constructor.call(this,t),null==e)throw new Error("Missing CDATA text");this.text=this.stringify.cdata(e)}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(n,e),n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(t){return this.options.writer.set(t).cdata(this)},n}()}).call(this)},function(t,e,n){(function(){var e,i={}.hasOwnProperty;e=n(0),t.exports=function(t){function n(t,e){if(n.__super__.constructor.call(this,t),null==e)throw new Error("Missing comment text");this.text=this.stringify.comment(e)}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(n,e),n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(t){return this.options.writer.set(t).comment(this)},n}()}).call(this)},function(t,e,n){(function(){var e,s,i={}.hasOwnProperty;s=n(1).isObject,e=n(0),t.exports=function(t){function o(t,e,n,r){var i;o.__super__.constructor.call(this,t),s(e)&&(e=(i=e).version,n=i.encoding,r=i.standalone),e||(e="1.0"),this.version=this.stringify.xmlVersion(e),null!=n&&(this.encoding=this.stringify.xmlEncoding(n)),null!=r&&(this.standalone=this.stringify.xmlStandalone(r))}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(o,e),o.prototype.toString=function(t){return this.options.writer.set(t).declaration(this)},o}()}).call(this)},function(t,e,n){(function(){var s,r,i,a,e,c,u={}.hasOwnProperty;c=n(1).isObject,e=n(0),s=n(7),i=n(8),r=n(9),a=n(10),t.exports=function(t){function o(t,e,n){var r,i;o.__super__.constructor.call(this,t),this.documentObject=t,c(e)&&(e=(r=e).pubID,n=r.sysID),null==n&&(n=(i=[e,n])[0],e=i[1]),null!=e&&(this.pubID=this.stringify.dtdPubID(e)),null!=n&&(this.sysID=this.stringify.dtdSysID(n))}return function(t,e){for(var n in e)u.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(o,e),o.prototype.element=function(t,e){var n;return n=new r(this,t,e),this.children.push(n),this},o.prototype.attList=function(t,e,n,r,i){var o;return o=new s(this,t,e,n,r,i),this.children.push(o),this},o.prototype.entity=function(t,e){var n;return n=new i(this,!1,t,e),this.children.push(n),this},o.prototype.pEntity=function(t,e){var n;return n=new i(this,!0,t,e),this.children.push(n),this},o.prototype.notation=function(t,e){var n;return n=new a(this,t,e),this.children.push(n),this},o.prototype.toString=function(t){return this.options.writer.set(t).docType(this)},o.prototype.ele=function(t,e){return this.element(t,e)},o.prototype.att=function(t,e,n,r,i){return this.attList(t,e,n,r,i)},o.prototype.ent=function(t,e){return this.entity(t,e)},o.prototype.pent=function(t,e){return this.pEntity(t,e)},o.prototype.not=function(t,e){return this.notation(t,e)},o.prototype.up=function(){return this.root()||this.documentObject},o}()}).call(this)},function(t,e,n){(function(){var e,i={}.hasOwnProperty;e=n(0),t.exports=function(t){function s(t,e,n,r,i,o){if(s.__super__.constructor.call(this,t),null==e)throw new Error("Missing DTD element name");if(null==n)throw new Error("Missing DTD attribute name");if(!r)throw new Error("Missing DTD attribute type");if(!i)throw new Error("Missing DTD attribute default");if(0!==i.indexOf("#")&&(i="#"+i),!i.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT");if(o&&!i.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT");this.elementName=this.stringify.eleName(e),this.attributeName=this.stringify.attName(n),this.attributeType=this.stringify.dtdAttType(r),this.defaultValue=this.stringify.dtdAttDefault(o),this.defaultValueType=i}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(s,e),s.prototype.toString=function(t){return this.options.writer.set(t).dtdAttList(this)},s}()}).call(this)},function(t,e,n){(function(){var e,o,s={}.hasOwnProperty;o=n(1).isObject,e=n(0),t.exports=function(t){function i(t,e,n,r){if(i.__super__.constructor.call(this,t),null==n)throw new Error("Missing entity name");if(null==r)throw new Error("Missing entity value");if(this.pe=!!e,this.name=this.stringify.eleName(n),o(r)){if(!r.pubID&&!r.sysID)throw new Error("Public and/or system identifiers are required for an external entity");if(r.pubID&&!r.sysID)throw new Error("System identifier is required for a public external entity");if(null!=r.pubID&&(this.pubID=this.stringify.dtdPubID(r.pubID)),null!=r.sysID&&(this.sysID=this.stringify.dtdSysID(r.sysID)),null!=r.nData&&(this.nData=this.stringify.dtdNData(r.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity")}else this.value=this.stringify.dtdEntityValue(r)}return function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(i,e),i.prototype.toString=function(t){return this.options.writer.set(t).dtdEntity(this)},i}()}).call(this)},function(t,e,n){(function(){var e,i={}.hasOwnProperty;e=n(0),t.exports=function(t){function r(t,e,n){if(r.__super__.constructor.call(this,t),null==e)throw new Error("Missing DTD element name");n||(n="(#PCDATA)"),Array.isArray(n)&&(n="("+n.join(",")+")"),this.name=this.stringify.eleName(e),this.value=this.stringify.dtdElementValue(n)}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(r,e),r.prototype.toString=function(t){return this.options.writer.set(t).dtdElement(this)},r}()}).call(this)},function(t,e,n){(function(){var e,i={}.hasOwnProperty;e=n(0),t.exports=function(t){function r(t,e,n){if(r.__super__.constructor.call(this,t),null==e)throw new Error("Missing notation name");if(!n.pubID&&!n.sysID)throw new Error("Public or system identifiers are required for an external entity");this.name=this.stringify.eleName(e),null!=n.pubID&&(this.pubID=this.stringify.dtdPubID(n.pubID)),null!=n.sysID&&(this.sysID=this.stringify.dtdSysID(n.sysID))}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(r,e),r.prototype.toString=function(t){return this.options.writer.set(t).dtdNotation(this)},r}()}).call(this)},function(t,e,n){(function(){var e,i={}.hasOwnProperty;e=n(0),t.exports=function(t){function n(t,e){if(n.__super__.constructor.call(this,t),null==e)throw new Error("Missing raw text");this.value=this.stringify.raw(e)}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(n,e),n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(t){return this.options.writer.set(t).raw(this)},n}()}).call(this)},function(t,e,n){(function(){var e,i={}.hasOwnProperty;e=n(0),t.exports=function(t){function n(t,e){if(n.__super__.constructor.call(this,t),null==e)throw new Error("Missing element text");this.value=this.stringify.eleText(e)}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(n,e),n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(t){return this.options.writer.set(t).text(this)},n}()}).call(this)},function(t,e,n){(function(){var e,i={}.hasOwnProperty;e=n(0),t.exports=function(t){function r(t,e,n){if(r.__super__.constructor.call(this,t),null==e)throw new Error("Missing instruction target");this.target=this.stringify.insTarget(e),n&&(this.value=this.stringify.insValue(n))}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(r,e),r.prototype.clone=function(){return Object.create(this)},r.prototype.toString=function(t){return this.options.writer.set(t).processingInstruction(this)},r}()}).call(this)},function(t,e){(function(){e.defaults={.1:{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},.2:{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,preserveChildrenOrder:!1,childkey:"$$",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:"\n"},headless:!1,chunkSize:1e4,emptyTag:"",cdata:!1}}}).call(this)},function(t,e,r){(function(){var y,m,a,c,u,l,s,p,g,w,v,T,n,E={}.hasOwnProperty;s=r(5),p=r(6),y=r(3),m=r(4),g=r(2),v=r(11),T=r(12),w=r(13),a=r(7),c=r(9),u=r(8),l=r(10),n=r(18),t.exports=function(t){function e(t){e.__super__.constructor.call(this,t)}return function(t,e){for(var n in e)E.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,n),e.prototype.document=function(t){var e,n,r,i,o;for(this.textispresent=!1,i="",n=0,r=(o=t.children).length;n<r;n++)e=o[n],i+=function(){switch(!1){case!(e instanceof s):return this.declaration(e);case!(e instanceof p):return this.docType(e);case!(e instanceof m):return this.comment(e);case!(e instanceof w):return this.processingInstruction(e);default:return this.element(e,0)}}.call(this);return this.pretty&&i.slice(-this.newline.length)===this.newline&&(i=i.slice(0,-this.newline.length)),i},e.prototype.attribute=function(t){return" "+t.name+'="'+t.value+'"'},e.prototype.cdata=function(t,e){return this.space(e)+"<![CDATA["+t.text+"]]>"+this.newline},e.prototype.comment=function(t,e){return this.space(e)+"\x3c!-- "+t.text+" --\x3e"+this.newline},e.prototype.declaration=function(t,e){var n;return n=this.space(e),n+='<?xml version="'+t.version+'"',null!=t.encoding&&(n+=' encoding="'+t.encoding+'"'),null!=t.standalone&&(n+=' standalone="'+t.standalone+'"'),n+=this.spacebeforeslash+"?>",n+=this.newline},e.prototype.docType=function(t,e){var n,r,i,o,s;if(e||(e=0),o=this.space(e),o+="<!DOCTYPE "+t.root().name,t.pubID&&t.sysID?o+=' PUBLIC "'+t.pubID+'" "'+t.sysID+'"':t.sysID&&(o+=' SYSTEM "'+t.sysID+'"'),0<t.children.length){for(o+=" [",o+=this.newline,r=0,i=(s=t.children).length;r<i;r++)n=s[r],o+=function(){switch(!1){case!(n instanceof a):return this.dtdAttList(n,e+1);case!(n instanceof c):return this.dtdElement(n,e+1);case!(n instanceof u):return this.dtdEntity(n,e+1);case!(n instanceof l):return this.dtdNotation(n,e+1);case!(n instanceof y):return this.cdata(n,e+1);case!(n instanceof m):return this.comment(n,e+1);case!(n instanceof w):return this.processingInstruction(n,e+1);default:throw new Error("Unknown DTD node type: "+n.constructor.name)}}.call(this);o+="]"}return o+=this.spacebeforeslash+">",o+=this.newline},e.prototype.element=function(t,e){var n,r,i,o,s,a,c,u,l,p,h,f,d;for(c in e||(e=0),d=!1,this.textispresent?(this.newline="",this.pretty=!1):(this.newline=this.newlinedefault,this.pretty=this.prettydefault),u="",u+=(f=this.space(e))+"<"+t.name,l=t.attributes)E.call(l,c)&&(n=l[c],u+=this.attribute(n));if(0===t.children.length||t.children.every(function(t){return""===t.value}))this.allowEmpty?u+="></"+t.name+">"+this.newline:u+=this.spacebeforeslash+"/>"+this.newline;else if(this.pretty&&1===t.children.length&&null!=t.children[0].value)u+=">",u+=t.children[0].value,u+="</"+t.name+">"+this.newline;else{if(this.dontprettytextnodes)for(i=0,s=(p=t.children).length;i<s;i++)if(null!=(r=p[i]).value){this.textispresent++,d=!0;break}for(this.textispresent&&(this.newline="",this.pretty=!1,f=this.space(e)),u+=">"+this.newline,o=0,a=(h=t.children).length;o<a;o++)r=h[o],u+=function(){switch(!1){case!(r instanceof y):return this.cdata(r,e+1);case!(r instanceof m):return this.comment(r,e+1);case!(r instanceof g):return this.element(r,e+1);case!(r instanceof v):return this.raw(r,e+1);case!(r instanceof T):return this.text(r,e+1);case!(r instanceof w):return this.processingInstruction(r,e+1);default:throw new Error("Unknown XML node type: "+r.constructor.name)}}.call(this);d&&this.textispresent--,this.textispresent||(this.newline=this.newlinedefault,this.pretty=this.prettydefault),u+=f+"</"+t.name+">"+this.newline}return u},e.prototype.processingInstruction=function(t,e){var n;return n=this.space(e)+"<?"+t.target,t.value&&(n+=" "+t.value),n+=this.spacebeforeslash+"?>"+this.newline},e.prototype.raw=function(t,e){return this.space(e)+t.value+this.newline},e.prototype.text=function(t,e){return this.space(e)+t.value+this.newline},e.prototype.dtdAttList=function(t,e){var n;return n=this.space(e)+"<!ATTLIST "+t.elementName+" "+t.attributeName+" "+t.attributeType,"#DEFAULT"!==t.defaultValueType&&(n+=" "+t.defaultValueType),t.defaultValue&&(n+=' "'+t.defaultValue+'"'),n+=this.spacebeforeslash+">"+this.newline},e.prototype.dtdElement=function(t,e){return this.space(e)+"<!ELEMENT "+t.name+" "+t.value+this.spacebeforeslash+">"+this.newline},e.prototype.dtdEntity=function(t,e){var n;return n=this.space(e)+"<!ENTITY",t.pe&&(n+=" %"),n+=" "+t.name,t.value?n+=' "'+t.value+'"':(t.pubID&&t.sysID?n+=' PUBLIC "'+t.pubID+'" "'+t.sysID+'"':t.sysID&&(n+=' SYSTEM "'+t.sysID+'"'),t.nData&&(n+=" NDATA "+t.nData)),n+=this.spacebeforeslash+">"+this.newline},e.prototype.dtdNotation=function(t,e){var n;return n=this.space(e)+"<!NOTATION "+t.name,t.pubID&&t.sysID?n+=' PUBLIC "'+t.pubID+'" "'+t.sysID+'"':t.pubID?n+=' PUBLIC "'+t.pubID+'"':t.sysID&&(n+=' SYSTEM "'+t.sysID+'"'),n+=this.spacebeforeslash+">"+this.newline},e.prototype.openNode=function(t,e){var n,r,i,o;if(e||(e=0),t instanceof g){for(r in i=this.space(e)+"<"+t.name,o=t.attributes)E.call(o,r)&&(n=o[r],i+=this.attribute(n));return i+=(t.children?">":"/>")+this.newline}return i=this.space(e)+"<!DOCTYPE "+t.rootNodeName,t.pubID&&t.sysID?i+=' PUBLIC "'+t.pubID+'" "'+t.sysID+'"':t.sysID&&(i+=' SYSTEM "'+t.sysID+'"'),i+=(t.children?" [":">")+this.newline},e.prototype.closeNode=function(t,e){switch(e||(e=0),!1){case!(t instanceof g):return this.space(e)+"</"+t.name+">"+this.newline;case!(t instanceof p):return this.space(e)+"]>"+this.newline}},e}()}).call(this)},function(t,e){(function(){t.exports=function(){function t(t,e,n){if(this.options=t.options,this.stringify=t.stringify,null==e)throw new Error("Missing attribute name of element "+t.name);if(null==n)throw new Error("Missing attribute value for attribute "+e+" of element "+t.name);this.name=this.stringify.attName(e),this.value=this.stringify.attValue(n)}return t.prototype.clone=function(){return Object.create(this)},t.prototype.toString=function(t){return this.options.writer.set(t).attribute(this)},t}()}).call(this)},function(t,e){(function(){var s={}.hasOwnProperty;t.exports=function(){function t(t){var e,n,r,i,o;for(r in this.assertLegalChar=(e=this.assertLegalChar,n=this,function(){return e.apply(n,arguments)}),t||(t={}),this.noDoubleEncoding=t.noDoubleEncoding,i=t.stringify||{})s.call(i,r)&&(o=i[r],this[r]=o)}return t.prototype.eleName=function(t){return t=""+t||"",this.assertLegalChar(t)},t.prototype.eleText=function(t){return t=""+t||"",this.assertLegalChar(this.elEscape(t))},t.prototype.cdata=function(t){return t=(t=""+t||"").replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(t)},t.prototype.comment=function(t){if((t=""+t||"").match(/--/))throw new Error("Comment text cannot contain double-hypen: "+t);return this.assertLegalChar(t)},t.prototype.raw=function(t){return""+t||""},t.prototype.attName=function(t){return""+t||""},t.prototype.attValue=function(t){return t=""+t||"",this.attEscape(t)},t.prototype.insTarget=function(t){return""+t||""},t.prototype.insValue=function(t){if((t=""+t||"").match(/\?>/))throw new Error("Invalid processing instruction value: "+t);return t},t.prototype.xmlVersion=function(t){if(!(t=""+t||"").match(/1\.[0-9]+/))throw new Error("Invalid version number: "+t);return t},t.prototype.xmlEncoding=function(t){if(!(t=""+t||"").match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+t);return t},t.prototype.xmlStandalone=function(t){return t?"yes":"no"},t.prototype.dtdPubID=function(t){return""+t||""},t.prototype.dtdSysID=function(t){return""+t||""},t.prototype.dtdElementValue=function(t){return""+t||""},t.prototype.dtdAttType=function(t){return""+t||""},t.prototype.dtdAttDefault=function(t){return null!=t?""+t||"":t},t.prototype.dtdEntityValue=function(t){return""+t||""},t.prototype.dtdNData=function(t){return""+t||""},t.prototype.convertAttKey="@",t.prototype.convertPIKey="?",t.prototype.convertTextKey="#text",t.prototype.convertCDataKey="#cdata",t.prototype.convertCommentKey="#comment",t.prototype.convertRawKey="#raw",t.prototype.assertLegalChar=function(t){var e;if(e=t.match(/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/))throw new Error("Invalid character in string: "+t+" at index "+e.index);return t},t.prototype.elEscape=function(t){var e;return e=this.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,t.replace(e,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;")},t.prototype.attEscape=function(t){var e;return e=this.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,t.replace(e,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;")},t}()}).call(this)},function(t,e){(function(){var l={}.hasOwnProperty;t.exports=function(){function t(t){var e,n,r,i,o,s,a,c,u;for(e in t||(t={}),this.pretty=t.pretty||!1,this.allowEmpty=null!=(n=t.allowEmpty)&&n,this.pretty?(this.indent=null!=(r=t.indent)?r:"  ",this.newline=null!=(i=t.newline)?i:"\n",this.offset=null!=(o=t.offset)?o:0,this.dontprettytextnodes=null!=(s=t.dontprettytextnodes)?s:0):(this.indent="",this.newline="",this.offset=0,this.dontprettytextnodes=0),this.spacebeforeslash=null!=(a=t.spacebeforeslash)?a:"",!0===this.spacebeforeslash&&(this.spacebeforeslash=" "),this.newlinedefault=this.newline,this.prettydefault=this.pretty,c=t.writer||{})l.call(c,e)&&(u=c[e],this[e]=u)}return t.prototype.set=function(t){var e,n,r;for(e in t||(t={}),"pretty"in t&&(this.pretty=t.pretty),"allowEmpty"in t&&(this.allowEmpty=t.allowEmpty),this.pretty?(this.indent="indent"in t?t.indent:"  ",this.newline="newline"in t?t.newline:"\n",this.offset="offset"in t?t.offset:0,this.dontprettytextnodes="dontprettytextnodes"in t?t.dontprettytextnodes:0):(this.indent="",this.newline="",this.offset=0,this.dontprettytextnodes=0),this.spacebeforeslash="spacebeforeslash"in t?t.spacebeforeslash:"",!0===this.spacebeforeslash&&(this.spacebeforeslash=" "),this.newlinedefault=this.newline,this.prettydefault=this.pretty,n=t.writer||{})l.call(n,e)&&(r=n[e],this[e]=r);return this},t.prototype.space=function(t){var e;return this.pretty&&0<(e=(t||0)+this.offset+1)?new Array(e).join(this.indent):""},t}()}).call(this)},function(t,n){(function(){"use strict";var e;e=new RegExp(/(?!xmlns)^.*:/),n.normalize=function(t){return t.toLowerCase()},n.firstCharLowerCase=function(t){return t.charAt(0).toLowerCase()+t.slice(1)},n.stripPrefix=function(t){return t.replace(e,"")},n.parseNumbers=function(t){return isNaN(t)||(t=t%1==0?parseInt(t,10):parseFloat(t)),t},n.parseBooleans=function(t){return/^(?:true|false)$/i.test(t)&&(t="true"===t.toLowerCase()),t}}).call(this)},function(t,e){t.exports=require("https")},function(t,o,s){(function(){"use strict";var t,e,n,r,i={}.hasOwnProperty;e=s(14),t=s(24),n=s(29),r=s(19),o.defaults=e.defaults,o.processors=r,o.ValidationError=function(t){function e(t){this.message=t}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,Error),e}(),o.Builder=t.Builder,o.Parser=n.Parser,o.parseString=n.parseString}).call(this)},function(t,e){t.exports=require("path")},function(t,e){t.exports=require("fs")},function(t,n,o){(function(){"use strict";var r,i,e,h,f,d={}.hasOwnProperty;r=o(25),i=o(14).defaults,h=function(t){return"string"==typeof t&&(0<=t.indexOf("&")||0<=t.indexOf(">")||0<=t.indexOf("<"))},f=function(t){return"<![CDATA["+e(t)+"]]>"},e=function(t){return t.replace("]]>","]]]]><![CDATA[>")},n.Builder=function(){function t(t){var e,n,r;for(e in this.options={},n=i[.2])d.call(n,e)&&(r=n[e],this.options[e]=r);for(e in t)d.call(t,e)&&(r=t[e],this.options[e]=r)}return t.prototype.buildObject=function(t){var c,u,l,e,n,p;return c=this.options.attrkey,u=this.options.charkey,1===Object.keys(t).length&&this.options.rootName===i[.2].rootName?t=t[n=Object.keys(t)[0]]:n=this.options.rootName,p=this,l=function(t,e){var n,r,i,o,s,a;if("object"!=typeof e)p.options.cdata&&h(e)?t.raw(f(e)):t.txt(e);else if(Array.isArray(e)){for(o in e)if(d.call(e,o))for(s in r=e[o])i=r[s],t=l(t.ele(s),i).up()}else for(s in e)if(d.call(e,s))if(r=e[s],s===c){if("object"==typeof r)for(n in r)a=r[n],t=t.att(n,a)}else if(s===u)t=p.options.cdata&&h(r)?t.raw(f(r)):t.txt(r);else if(Array.isArray(r))for(o in r)d.call(r,o)&&(t="string"==typeof(i=r[o])?p.options.cdata&&h(i)?t.ele(s).raw(f(i)).up():t.ele(s,i).up():l(t.ele(s),i).up());else t="object"==typeof r?l(t.ele(s),r).up():"string"==typeof r&&p.options.cdata&&h(r)?t.ele(s).raw(f(r)).up():(null==r&&(r=""),t.ele(s,r.toString()).up());return t},e=r.create(n,this.options.xmldec,this.options.doctype,{headless:this.options.headless,allowSurrogateChars:this.options.allowSurrogateChars}),l(e,t).end(this.options.renderOpts)},t}()}).call(this)},function(r,t,c){(function(){var s,i,n,e,a,o,t;t=c(1),a=t.assign,o=t.isFunction,s=c(26),i=c(27),e=c(15),n=c(28),r.exports.create=function(t,e,n,r){var i,o;if(null==t)throw new Error("Root element needs a name");return r=a({},e,n,r),o=(i=new s(r)).element(t),r.headless||(i.declaration(r),null==r.pubID&&null==r.sysID||i.doctype(r)),o},r.exports.begin=function(t,e,n){var r;return o(t)&&(e=(r=[t,e])[0],n=r[1],t={}),e?new i(t,e,n):new s(t)},r.exports.stringWriter=function(t){return new e(t)},r.exports.streamWriter=function(t,e){return new n(t,e)}}).call(this)},function(t,e,a){(function(){var n,r,i,o,s={}.hasOwnProperty;o=a(1).isPlainObject,n=a(0),i=a(17),r=a(15),t.exports=function(t){function e(t){e.__super__.constructor.call(this,null),t||(t={}),t.writer||(t.writer=new r),this.options=t,this.stringify=new i(t),this.isDocument=!0}return function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,n),e.prototype.end=function(t){var e;return t?o(t)&&(e=t,t=this.options.writer.set(e)):t=this.options.writer,t.document(this)},e.prototype.toString=function(t){return this.options.writer.set(t).document(this)},e}()}).call(this)},function(e,t,E){(function(){var i,n,r,s,o,a,c,u,l,p,h,f,d,y,m,g,w,v,t,T={}.hasOwnProperty;t=E(1),w=t.isObject,g=t.isFunction,v=t.isPlainObject,p=E(2),n=E(3),r=E(4),f=E(11),m=E(12),h=E(13),u=E(5),l=E(6),s=E(7),a=E(8),o=E(9),c=E(10),i=E(16),y=E(17),d=E(15),e.exports=function(){function t(t,e,n){var r;t||(t={}),t.writer?v(t.writer)&&(r=t.writer,t.writer=new d(r)):t.writer=new d(t),this.options=t,this.writer=t.writer,this.stringify=new y(t),this.onDataCallback=e||function(){},this.onEndCallback=n||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return t.prototype.node=function(t,e,n){var r;if(null==t)throw new Error("Missing node name");if(this.root&&-1===this.currentLevel)throw new Error("Document can only have one root node");return this.openCurrent(),t=t.valueOf(),null==e&&(e={}),e=e.valueOf(),w(e)||(n=(r=[e,n])[0],e=r[1]),this.currentNode=new p(this,t,e),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,null!=n&&this.text(n),this},t.prototype.element=function(t,e,n){return this.currentNode&&this.currentNode instanceof l?this.dtdElement.apply(this,arguments):this.node(t,e,n)},t.prototype.attribute=function(t,e){var n,r;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode");if(null!=t&&(t=t.valueOf()),w(t))for(n in t)T.call(t,n)&&(r=t[n],this.attribute(n,r));else g(e)&&(e=e.apply()),this.options.skipNullAttributes&&null==e||(this.currentNode.attributes[t]=new i(this,t,e));return this},t.prototype.text=function(t){var e;return this.openCurrent(),e=new m(this,t),this.onData(this.writer.text(e,this.currentLevel+1)),this},t.prototype.cdata=function(t){var e;return this.openCurrent(),e=new n(this,t),this.onData(this.writer.cdata(e,this.currentLevel+1)),this},t.prototype.comment=function(t){var e;return this.openCurrent(),e=new r(this,t),this.onData(this.writer.comment(e,this.currentLevel+1)),this},t.prototype.raw=function(t){var e;return this.openCurrent(),e=new f(this,t),this.onData(this.writer.raw(e,this.currentLevel+1)),this},t.prototype.instruction=function(t,e){var n,r,i,o,s;if(this.openCurrent(),null!=t&&(t=t.valueOf()),null!=e&&(e=e.valueOf()),Array.isArray(t))for(n=0,o=t.length;n<o;n++)r=t[n],this.instruction(r);else if(w(t))for(r in t)T.call(t,r)&&(i=t[r],this.instruction(r,i));else g(e)&&(e=e.apply()),s=new h(this,t,e),this.onData(this.writer.processingInstruction(s,this.currentLevel+1));return this},t.prototype.declaration=function(t,e,n){var r;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node");return r=new u(this,t,e,n),this.onData(this.writer.declaration(r,this.currentLevel+1)),this},t.prototype.doctype=function(t,e,n){if(this.openCurrent(),null==t)throw new Error("Missing root node name");if(this.root)throw new Error("dtd() must come before the root node");return this.currentNode=new l(this,e,n),this.currentNode.rootNodeName=t,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},t.prototype.dtdElement=function(t,e){var n;return this.openCurrent(),n=new o(this,t,e),this.onData(this.writer.dtdElement(n,this.currentLevel+1)),this},t.prototype.attList=function(t,e,n,r,i){var o;return this.openCurrent(),o=new s(this,t,e,n,r,i),this.onData(this.writer.dtdAttList(o,this.currentLevel+1)),this},t.prototype.entity=function(t,e){var n;return this.openCurrent(),n=new a(this,!1,t,e),this.onData(this.writer.dtdEntity(n,this.currentLevel+1)),this},t.prototype.pEntity=function(t,e){var n;return this.openCurrent(),n=new a(this,!0,t,e),this.onData(this.writer.dtdEntity(n,this.currentLevel+1)),this},t.prototype.notation=function(t,e){var n;return this.openCurrent(),n=new c(this,t,e),this.onData(this.writer.dtdNotation(n,this.currentLevel+1)),this},t.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},t.prototype.end=function(){for(;0<=this.currentLevel;)this.up();return this.onEnd()},t.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},t.prototype.openNode=function(t){if(!t.isOpen)return!this.root&&0===this.currentLevel&&t instanceof p&&(this.root=t),this.onData(this.writer.openNode(t,this.currentLevel)),t.isOpen=!0},t.prototype.closeNode=function(t){if(!t.isClosed)return this.onData(this.writer.closeNode(t,this.currentLevel)),t.isClosed=!0},t.prototype.onData=function(t){return this.documentStarted=!0,this.onDataCallback(t)},t.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},t.prototype.ele=function(){return this.element.apply(this,arguments)},t.prototype.nod=function(t,e,n){return this.node(t,e,n)},t.prototype.txt=function(t){return this.text(t)},t.prototype.dat=function(t){return this.cdata(t)},t.prototype.com=function(t){return this.comment(t)},t.prototype.ins=function(t,e){return this.instruction(t,e)},t.prototype.dec=function(t,e,n){return this.declaration(t,e,n)},t.prototype.dtd=function(t,e,n){return this.doctype(t,e,n)},t.prototype.e=function(t,e,n){return this.element(t,e,n)},t.prototype.n=function(t,e,n){return this.node(t,e,n)},t.prototype.t=function(t){return this.text(t)},t.prototype.d=function(t){return this.cdata(t)},t.prototype.c=function(t){return this.comment(t)},t.prototype.r=function(t){return this.raw(t)},t.prototype.i=function(t,e){return this.instruction(t,e)},t.prototype.att=function(){return this.currentNode&&this.currentNode instanceof l?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},t.prototype.a=function(){return this.currentNode&&this.currentNode instanceof l?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},t.prototype.ent=function(t,e){return this.entity(t,e)},t.prototype.pent=function(t,e){return this.pEntity(t,e)},t.prototype.not=function(t,e){return this.notation(t,e)},t}()}).call(this)},function(t,e,n){(function(){var l,p,s,a,c,u,h,f,d,y,m,g,e,w={}.hasOwnProperty;h=n(5),f=n(6),l=n(3),p=n(4),d=n(2),m=n(11),g=n(12),y=n(13),s=n(7),a=n(9),c=n(8),u=n(10),e=n(18),t.exports=function(t){function n(t,e){n.__super__.constructor.call(this,e),this.stream=t}return function(t,e){for(var n in e)w.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(n,e),n.prototype.document=function(t){var e,n,r,i,o,s,a,c;for(n=0,i=(s=t.children).length;n<i;n++)(e=s[n]).isLastRootNode=!1;for(t.children[t.children.length-1].isLastRootNode=!0,c=[],r=0,o=(a=t.children).length;r<o;r++)switch(e=a[r],!1){case!(e instanceof h):c.push(this.declaration(e));break;case!(e instanceof f):c.push(this.docType(e));break;case!(e instanceof p):c.push(this.comment(e));break;case!(e instanceof y):c.push(this.processingInstruction(e));break;default:c.push(this.element(e))}return c},n.prototype.attribute=function(t){return this.stream.write(" "+t.name+'="'+t.value+'"')},n.prototype.cdata=function(t,e){return this.stream.write(this.space(e)+"<![CDATA["+t.text+"]]>"+this.endline(t))},n.prototype.comment=function(t,e){return this.stream.write(this.space(e)+"\x3c!-- "+t.text+" --\x3e"+this.endline(t))},n.prototype.declaration=function(t,e){return this.stream.write(this.space(e)),this.stream.write('<?xml version="'+t.version+'"'),null!=t.encoding&&this.stream.write(' encoding="'+t.encoding+'"'),null!=t.standalone&&this.stream.write(' standalone="'+t.standalone+'"'),this.stream.write(this.spacebeforeslash+"?>"),this.stream.write(this.endline(t))},n.prototype.docType=function(t,e){var n,r,i,o;if(e||(e=0),this.stream.write(this.space(e)),this.stream.write("<!DOCTYPE "+t.root().name),t.pubID&&t.sysID?this.stream.write(' PUBLIC "'+t.pubID+'" "'+t.sysID+'"'):t.sysID&&this.stream.write(' SYSTEM "'+t.sysID+'"'),0<t.children.length){for(this.stream.write(" ["),this.stream.write(this.endline(t)),r=0,i=(o=t.children).length;r<i;r++)switch(n=o[r],!1){case!(n instanceof s):this.dtdAttList(n,e+1);break;case!(n instanceof a):this.dtdElement(n,e+1);break;case!(n instanceof c):this.dtdEntity(n,e+1);break;case!(n instanceof u):this.dtdNotation(n,e+1);break;case!(n instanceof l):this.cdata(n,e+1);break;case!(n instanceof p):this.comment(n,e+1);break;case!(n instanceof y):this.processingInstruction(n,e+1);break;default:throw new Error("Unknown DTD node type: "+n.constructor.name)}this.stream.write("]")}return this.stream.write(this.spacebeforeslash+">"),this.stream.write(this.endline(t))},n.prototype.element=function(t,e){var n,r,i,o,s,a,c,u;for(s in e||(e=0),u=this.space(e),this.stream.write(u+"<"+t.name),a=t.attributes)w.call(a,s)&&(n=a[s],this.attribute(n));if(0===t.children.length||t.children.every(function(t){return""===t.value}))this.allowEmpty?this.stream.write("></"+t.name+">"):this.stream.write(this.spacebeforeslash+"/>");else if(this.pretty&&1===t.children.length&&null!=t.children[0].value)this.stream.write(">"),this.stream.write(t.children[0].value),this.stream.write("</"+t.name+">");else{for(this.stream.write(">"+this.newline),i=0,o=(c=t.children).length;i<o;i++)switch(r=c[i],!1){case!(r instanceof l):this.cdata(r,e+1);break;case!(r instanceof p):this.comment(r,e+1);break;case!(r instanceof d):this.element(r,e+1);break;case!(r instanceof m):this.raw(r,e+1);break;case!(r instanceof g):this.text(r,e+1);break;case!(r instanceof y):this.processingInstruction(r,e+1);break;default:throw new Error("Unknown XML node type: "+r.constructor.name)}this.stream.write(u+"</"+t.name+">")}return this.stream.write(this.endline(t))},n.prototype.processingInstruction=function(t,e){return this.stream.write(this.space(e)+"<?"+t.target),t.value&&this.stream.write(" "+t.value),this.stream.write(this.spacebeforeslash+"?>"+this.endline(t))},n.prototype.raw=function(t,e){return this.stream.write(this.space(e)+t.value+this.endline(t))},n.prototype.text=function(t,e){return this.stream.write(this.space(e)+t.value+this.endline(t))},n.prototype.dtdAttList=function(t,e){return this.stream.write(this.space(e)+"<!ATTLIST "+t.elementName+" "+t.attributeName+" "+t.attributeType),"#DEFAULT"!==t.defaultValueType&&this.stream.write(" "+t.defaultValueType),t.defaultValue&&this.stream.write(' "'+t.defaultValue+'"'),this.stream.write(this.spacebeforeslash+">"+this.endline(t))},n.prototype.dtdElement=function(t,e){return this.stream.write(this.space(e)+"<!ELEMENT "+t.name+" "+t.value),this.stream.write(this.spacebeforeslash+">"+this.endline(t))},n.prototype.dtdEntity=function(t,e){return this.stream.write(this.space(e)+"<!ENTITY"),t.pe&&this.stream.write(" %"),this.stream.write(" "+t.name),t.value?this.stream.write(' "'+t.value+'"'):(t.pubID&&t.sysID?this.stream.write(' PUBLIC "'+t.pubID+'" "'+t.sysID+'"'):t.sysID&&this.stream.write(' SYSTEM "'+t.sysID+'"'),t.nData&&this.stream.write(" NDATA "+t.nData)),this.stream.write(this.spacebeforeslash+">"+this.endline(t))},n.prototype.dtdNotation=function(t,e){return this.stream.write(this.space(e)+"<!NOTATION "+t.name),t.pubID&&t.sysID?this.stream.write(' PUBLIC "'+t.pubID+'" "'+t.sysID+'"'):t.pubID?this.stream.write(' PUBLIC "'+t.pubID+'"'):t.sysID&&this.stream.write(' SYSTEM "'+t.sysID+'"'),this.stream.write(this.spacebeforeslash+">"+this.endline(t))},n.prototype.endline=function(t){return t.isLastRootNode?"":this.newline},n}()}).call(this)},function(t,u,e){(function(){"use strict";var r,i,n,f,d,o,c,s,a=function(t,e){return function(){return t.apply(e,arguments)}},y={}.hasOwnProperty;c=e(30),n=e(33),r=e(34),o=e(19),s=e(35).setImmediate,i=e(14).defaults,f=function(t){return"object"==typeof t&&null!=t&&0===Object.keys(t).length},d=function(t,e,n){var r,i;for(r=0,i=t.length;r<i;r++)e=(0,t[r])(e,n);return e},u.Parser=function(t){function e(t){var e,n,r;if(this.parseString=a(this.parseString,this),this.reset=a(this.reset,this),this.assignOrPush=a(this.assignOrPush,this),this.processAsync=a(this.processAsync,this),!(this instanceof u.Parser))return new u.Parser(t);for(e in this.options={},n=i[.2])y.call(n,e)&&(r=n[e],this.options[e]=r);for(e in t)y.call(t,e)&&(r=t[e],this.options[e]=r);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(o.normalize)),this.reset()}return function(t,e){for(var n in e)y.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,n.EventEmitter),e.prototype.processAsync=function(){var t,e;try{return this.remaining.length<=this.options.chunkSize?(t=this.remaining,this.remaining="",this.saxParser=this.saxParser.write(t),this.saxParser.close()):(t=this.remaining.substr(0,this.options.chunkSize),this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length),this.saxParser=this.saxParser.write(t),s(this.processAsync))}catch(t){if(e=t,!this.saxParser.errThrown)return this.saxParser.errThrown=!0,this.emit(e)}},e.prototype.assignOrPush=function(t,e,n){return e in t?(t[e]instanceof Array||(t[e]=[t[e]]),t[e].push(n)):this.options.explicitArray?t[e]=[n]:t[e]=n},e.prototype.reset=function(){var s,l,n,p,e,t,a,h,r;return this.removeAllListeners(),this.saxParser=c.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=(e=this,function(t){if(e.saxParser.resume(),!e.saxParser.errThrown)return e.saxParser.errThrown=!0,e.emit("error",t)}),this.saxParser.onend=(t=this,function(){if(!t.saxParser.ended)return t.saxParser.ended=!0,t.emit("end",t.resultObject)}),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,p=[],s=this.options.attrkey,l=this.options.charkey,this.saxParser.onopentag=(a=this,function(t){var e,n,r,i,o;if((r={})[l]="",!a.options.ignoreAttrs)for(e in o=t.attributes)y.call(o,e)&&(s in r||a.options.mergeAttrs||(r[s]={}),n=a.options.attrValueProcessors?d(a.options.attrValueProcessors,t.attributes[e],e):t.attributes[e],i=a.options.attrNameProcessors?d(a.options.attrNameProcessors,e):e,a.options.mergeAttrs?a.assignOrPush(r,i,n):r[s][i]=n);return r["#name"]=a.options.tagNameProcessors?d(a.options.tagNameProcessors,t.name):t.name,a.options.xmlns&&(r[a.options.xmlnskey]={uri:t.uri,local:t.local}),p.push(r)}),this.saxParser.onclosetag=(h=this,function(){var t,e,n,r,i,o,s,a,c,u;if(o=p.pop(),i=o["#name"],h.options.explicitChildren&&h.options.preserveChildrenOrder||delete o["#name"],!0===o.cdata&&(t=o.cdata,delete o.cdata),c=p[p.length-1],o[l].match(/^\s*$/)&&!t?(e=o[l],delete o[l]):(h.options.trim&&(o[l]=o[l].trim()),h.options.normalize&&(o[l]=o[l].replace(/\s{2,}/g," ").trim()),o[l]=h.options.valueProcessors?d(h.options.valueProcessors,o[l],i):o[l],1===Object.keys(o).length&&l in o&&!h.EXPLICIT_CHARKEY&&(o=o[l])),f(o)&&(o=""!==h.options.emptyTag?h.options.emptyTag:e),null!=h.options.validator&&(u="/"+function(){var t,e,n;for(n=[],t=0,e=p.length;t<e;t++)r=p[t],n.push(r["#name"]);return n}().concat(i).join("/"),function(){var e;try{o=h.options.validator(u,c&&c[i],o)}catch(t){return e=t,h.emit("error",e)}}()),h.options.explicitChildren&&!h.options.mergeAttrs&&"object"==typeof o)if(h.options.preserveChildrenOrder){if(c){for(n in c[h.options.childkey]=c[h.options.childkey]||[],s={},o)y.call(o,n)&&(s[n]=o[n]);c[h.options.childkey].push(s),delete o["#name"],1===Object.keys(o).length&&l in o&&!h.EXPLICIT_CHARKEY&&(o=o[l])}}else r={},h.options.attrkey in o&&(r[h.options.attrkey]=o[h.options.attrkey],delete o[h.options.attrkey]),!h.options.charsAsChildren&&h.options.charkey in o&&(r[h.options.charkey]=o[h.options.charkey],delete o[h.options.charkey]),0<Object.getOwnPropertyNames(o).length&&(r[h.options.childkey]=o),o=r;return 0<p.length?h.assignOrPush(c,i,o):(h.options.explicitRoot&&(a=o,(o={})[i]=a),h.resultObject=o,h.saxParser.ended=!0,h.emit("end",h.resultObject))}),n=function(t){var e,n;if(n=p[p.length-1])return n[l]+=t,r.options.explicitChildren&&r.options.preserveChildrenOrder&&r.options.charsAsChildren&&(r.options.includeWhiteChars||""!==t.replace(/\\n/g,"").trim())&&(n[r.options.childkey]=n[r.options.childkey]||[],(e={"#name":"__text__"})[l]=t,r.options.normalize&&(e[l]=e[l].replace(/\s{2,}/g," ").trim()),n[r.options.childkey].push(e)),n},(r=this).saxParser.ontext=n,this.saxParser.oncdata=function(t){var e;if(e=n(t))return e.cdata=!0}},e.prototype.parseString=function(t,e){var n;null!=e&&"function"==typeof e&&(this.on("end",function(t){return this.reset(),e(null,t)}),this.on("error",function(t){return this.reset(),e(t)}));try{return""===(t=t.toString()).trim()?(this.emit("end",null),!0):(t=r.stripBOM(t),this.options.async?(this.remaining=t,s(this.processAsync),this.saxParser):this.saxParser.write(t).close())}catch(t){if(n=t,!this.saxParser.errThrown&&!this.saxParser.ended)return this.emit("error",n),this.saxParser.errThrown=!0;if(this.saxParser.ended)throw n}},e}(),u.parseString=function(t,e,n){var r,i;return null!=n?("function"==typeof n&&(r=n),"object"==typeof e&&(i=e)):("function"==typeof e&&(r=e),i={}),new u.Parser(i).parseString(t,r)}}).call(this)},function(t,e,n){!function(u){u.parser=function(t,e){return new i(t,e)},u.SAXParser=i,u.SAXStream=s,u.createStream=function(t,e){return new s(t,e)},u.MAX_BUFFER_LENGTH=65536;var r,l=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function i(t,e){if(!(this instanceof i))return new i(t,e);var n=this;!function(t){for(var e=0,n=l.length;e<n;e++)t[l[e]]=""}(n),n.q=n.c="",n.bufferCheckPosition=u.MAX_BUFFER_LENGTH,n.opt=e||{},n.opt.lowercase=n.opt.lowercase||n.opt.lowercasetags,n.looseCase=n.opt.lowercase?"toLowerCase":"toUpperCase",n.tags=[],n.closed=n.closedRoot=n.sawRoot=!1,n.tag=n.error=null,n.strict=!!t,n.noscript=!(!t&&!n.opt.noscript),n.state=D.BEGIN,n.strictEntities=n.opt.strictEntities,n.ENTITIES=n.strictEntities?Object.create(u.XML_ENTITIES):Object.create(u.ENTITIES),n.attribList=[],n.opt.xmlns&&(n.ns=Object.create(f)),n.trackPosition=!1!==n.opt.position,n.trackPosition&&(n.position=n.line=n.column=0),_(n,"onready")}u.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(t){function e(){}return e.prototype=t,new e}),Object.keys||(Object.keys=function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e}),i.prototype={end:function(){O(this)},write:function(t){var e=this;if(this.error)throw this.error;if(e.closed)return x(e,"Cannot write after close. Assign an onready handler.");if(null===t)return O(e);"object"==typeof t&&(t=t.toString());var n=0,r="";for(;r=k(t,n++),e.c=r;)switch(e.trackPosition&&(e.position++,"\n"===r?(e.line++,e.column=0):e.column++),e.state){case D.BEGIN:if(e.state=D.BEGIN_WHITESPACE,"\ufeff"===r)continue;U(e,r);continue;case D.BEGIN_WHITESPACE:U(e,r);continue;case D.TEXT:if(e.sawRoot&&!e.closedRoot){for(var i=n-1;r&&"<"!==r&&"&"!==r;)(r=k(t,n++))&&e.trackPosition&&(e.position++,"\n"===r?(e.line++,e.column=0):e.column++);e.textNode+=t.substring(i,n-1)}"<"!==r||e.sawRoot&&e.closedRoot&&!e.strict?(w(r)||e.sawRoot&&!e.closedRoot||C(e,"Text data outside of root node."),"&"===r?e.state=D.TEXT_ENTITY:e.textNode+=r):(e.state=D.OPEN_WAKA,e.startTagPosition=e.position);continue;case D.SCRIPT:"<"===r?e.state=D.SCRIPT_ENDING:e.script+=r;continue;case D.SCRIPT_ENDING:e.state="/"===r?D.CLOSE_TAG:(e.script+="<"+r,D.SCRIPT);continue;case D.OPEN_WAKA:if("!"===r)e.state=D.SGML_DECL,e.sgmlDecl="";else if(w(r));else if(T(d,r))e.state=D.OPEN_TAG,e.tagName=r;else if("/"===r)e.state=D.CLOSE_TAG,e.tagName="";else if("?"===r)e.state=D.PROC_INST,e.procInstName=e.procInstBody="";else{if(C(e,"Unencoded <"),e.startTagPosition+1<e.position){var o=e.position-e.startTagPosition;r=new Array(o).join(" ")+r}e.textNode+="<"+r,e.state=D.TEXT}continue;case D.SGML_DECL:(e.sgmlDecl+r).toUpperCase()===p?(I(e,"onopencdata"),e.state=D.CDATA,e.sgmlDecl="",e.cdata=""):e.sgmlDecl+r==="--"?(e.state=D.COMMENT,e.comment="",e.sgmlDecl=""):(e.sgmlDecl+r).toUpperCase()===h?(e.state=D.DOCTYPE,(e.doctype||e.sawRoot)&&C(e,"Inappropriately located doctype declaration"),e.doctype="",e.sgmlDecl=""):">"===r?(I(e,"onsgmldeclaration",e.sgmlDecl),e.sgmlDecl="",e.state=D.TEXT):(v(r)&&(e.state=D.SGML_DECL_QUOTED),e.sgmlDecl+=r);continue;case D.SGML_DECL_QUOTED:r===e.q&&(e.state=D.SGML_DECL,e.q=""),e.sgmlDecl+=r;continue;case D.DOCTYPE:">"===r?(e.state=D.TEXT,I(e,"ondoctype",e.doctype),e.doctype=!0):(e.doctype+=r,"["===r?e.state=D.DOCTYPE_DTD:v(r)&&(e.state=D.DOCTYPE_QUOTED,e.q=r));continue;case D.DOCTYPE_QUOTED:e.doctype+=r,r===e.q&&(e.q="",e.state=D.DOCTYPE);continue;case D.DOCTYPE_DTD:e.doctype+=r,"]"===r?e.state=D.DOCTYPE:v(r)&&(e.state=D.DOCTYPE_DTD_QUOTED,e.q=r);continue;case D.DOCTYPE_DTD_QUOTED:e.doctype+=r,r===e.q&&(e.state=D.DOCTYPE_DTD,e.q="");continue;case D.COMMENT:"-"===r?e.state=D.COMMENT_ENDING:e.comment+=r;continue;case D.COMMENT_ENDING:"-"===r?(e.state=D.COMMENT_ENDED,e.comment=A(e.opt,e.comment),e.comment&&I(e,"oncomment",e.comment),e.comment=""):(e.comment+="-"+r,e.state=D.COMMENT);continue;case D.COMMENT_ENDED:e.state=">"!==r?(C(e,"Malformed comment"),e.comment+="--"+r,D.COMMENT):D.TEXT;continue;case D.CDATA:"]"===r?e.state=D.CDATA_ENDING:e.cdata+=r;continue;case D.CDATA_ENDING:e.state="]"===r?D.CDATA_ENDING_2:(e.cdata+="]"+r,D.CDATA);continue;case D.CDATA_ENDING_2:">"===r?(e.cdata&&I(e,"oncdata",e.cdata),I(e,"onclosecdata"),e.cdata="",e.state=D.TEXT):"]"===r?e.cdata+="]":(e.cdata+="]]"+r,e.state=D.CDATA);continue;case D.PROC_INST:"?"===r?e.state=D.PROC_INST_ENDING:w(r)?e.state=D.PROC_INST_BODY:e.procInstName+=r;continue;case D.PROC_INST_BODY:if(!e.procInstBody&&w(r))continue;"?"===r?e.state=D.PROC_INST_ENDING:e.procInstBody+=r;continue;case D.PROC_INST_ENDING:e.state=">"===r?(I(e,"onprocessinginstruction",{name:e.procInstName,body:e.procInstBody}),e.procInstName=e.procInstBody="",D.TEXT):(e.procInstBody+="?"+r,D.PROC_INST_BODY);continue;case D.OPEN_TAG:T(y,r)?e.tagName+=r:(P(e),">"===r?F(e):e.state="/"===r?D.OPEN_TAG_SLASH:(w(r)||C(e,"Invalid character in tag name"),D.ATTRIB));continue;case D.OPEN_TAG_SLASH:">"===r?(F(e,!0),R(e)):(C(e,"Forward-slash in opening tag not followed by >"),e.state=D.ATTRIB);continue;case D.ATTRIB:if(w(r))continue;">"===r?F(e):"/"===r?e.state=D.OPEN_TAG_SLASH:T(d,r)?(e.attribName=r,e.attribValue="",e.state=D.ATTRIB_NAME):C(e,"Invalid attribute name");continue;case D.ATTRIB_NAME:"="===r?e.state=D.ATTRIB_VALUE:">"===r?(C(e,"Attribute without value"),e.attribValue=e.attribName,L(e),F(e)):w(r)?e.state=D.ATTRIB_NAME_SAW_WHITE:T(y,r)?e.attribName+=r:C(e,"Invalid attribute name");continue;case D.ATTRIB_NAME_SAW_WHITE:if("="===r)e.state=D.ATTRIB_VALUE;else{if(w(r))continue;C(e,"Attribute without value"),e.tag.attributes[e.attribName]="",e.attribValue="",I(e,"onattribute",{name:e.attribName,value:""}),e.attribName="",">"===r?F(e):T(d,r)?(e.attribName=r,e.state=D.ATTRIB_NAME):(C(e,"Invalid attribute name"),e.state=D.ATTRIB)}continue;case D.ATTRIB_VALUE:if(w(r))continue;v(r)?(e.q=r,e.state=D.ATTRIB_VALUE_QUOTED):(C(e,"Unquoted attribute value"),e.state=D.ATTRIB_VALUE_UNQUOTED,e.attribValue=r);continue;case D.ATTRIB_VALUE_QUOTED:if(r!==e.q){"&"===r?e.state=D.ATTRIB_VALUE_ENTITY_Q:e.attribValue+=r;continue}L(e),e.q="",e.state=D.ATTRIB_VALUE_CLOSED;continue;case D.ATTRIB_VALUE_CLOSED:w(r)?e.state=D.ATTRIB:">"===r?F(e):"/"===r?e.state=D.OPEN_TAG_SLASH:T(d,r)?(C(e,"No whitespace between attributes"),e.attribName=r,e.attribValue="",e.state=D.ATTRIB_NAME):C(e,"Invalid attribute name");continue;case D.ATTRIB_VALUE_UNQUOTED:if(">"!==(c=r)&&!w(c)){"&"===r?e.state=D.ATTRIB_VALUE_ENTITY_U:e.attribValue+=r;continue}L(e),">"===r?F(e):e.state=D.ATTRIB;continue;case D.CLOSE_TAG:if(e.tagName)">"===r?R(e):T(y,r)?e.tagName+=r:e.script?(e.script+="</"+e.tagName,e.tagName="",e.state=D.SCRIPT):(w(r)||C(e,"Invalid tagname in closing tag"),e.state=D.CLOSE_TAG_SAW_WHITE);else{if(w(r))continue;T(d,r)?e.tagName=r:e.script?(e.script+="</"+r,e.state=D.SCRIPT):C(e,"Invalid tagname in closing tag.")}continue;case D.CLOSE_TAG_SAW_WHITE:if(w(r))continue;">"===r?R(e):C(e,"Invalid characters in closing tag");continue;case D.TEXT_ENTITY:case D.ATTRIB_VALUE_ENTITY_Q:case D.ATTRIB_VALUE_ENTITY_U:var s,a;switch(e.state){case D.TEXT_ENTITY:s=D.TEXT,a="textNode";break;case D.ATTRIB_VALUE_ENTITY_Q:s=D.ATTRIB_VALUE_QUOTED,a="attribValue";break;case D.ATTRIB_VALUE_ENTITY_U:s=D.ATTRIB_VALUE_UNQUOTED,a="attribValue"}";"===r?(e[a]+=M(e),e.entity="",e.state=s):T(e.entity.length?g:m,r)?e.entity+=r:(C(e,"Invalid character in entity name"),e[a]+="&"+e.entity+r,e.entity="",e.state=s);continue;default:throw new Error(e,"Unknown state: "+e.state)}var c;e.position>=e.bufferCheckPosition&&function(t){for(var e=Math.max(u.MAX_BUFFER_LENGTH,10),n=0,r=0,i=l.length;r<i;r++){var o=t[l[r]].length;if(e<o)switch(l[r]){case"textNode":N(t);break;case"cdata":I(t,"oncdata",t.cdata),t.cdata="";break;case"script":I(t,"onscript",t.script),t.script="";break;default:x(t,"Max buffer length exceeded: "+l[r])}n=Math.max(n,o)}var s=u.MAX_BUFFER_LENGTH-n;t.bufferCheckPosition=s+t.position}(e);return e}
/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var t;N(t=this),""!==t.cdata&&(I(t,"oncdata",t.cdata),t.cdata=""),""!==t.script&&(I(t,"onscript",t.script),t.script="")}};try{r=n(31).Stream}catch(t){r=function(){}}var o=u.EVENTS.filter(function(t){return"error"!==t&&"end"!==t});function s(t,e){if(!(this instanceof s))return new s(t,e);r.apply(this),this._parser=new i(t,e),this.writable=!0,this.readable=!0;var n=this;this._parser.onend=function(){n.emit("end")},this._parser.onerror=function(t){n.emit("error",t),n._parser.error=null},this._decoder=null,o.forEach(function(e){Object.defineProperty(n,"on"+e,{get:function(){return n._parser["on"+e]},set:function(t){if(!t)return n.removeAllListeners(e),n._parser["on"+e]=t;n.on(e,t)},enumerable:!0,configurable:!1})})}(s.prototype=Object.create(r.prototype,{constructor:{value:s}})).write=function(t){if("function"==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(t)){if(!this._decoder){var e=n(32).StringDecoder;this._decoder=new e("utf8")}t=this._decoder.write(t)}return this._parser.write(t.toString()),this.emit("data",t),!0},s.prototype.end=function(t){return t&&t.length&&this.write(t),this._parser.end(),!0},s.prototype.on=function(e,t){var n=this;return n._parser["on"+e]||-1===o.indexOf(e)||(n._parser["on"+e]=function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);t.splice(0,0,e),n.emit.apply(n,t)}),r.prototype.on.call(n,e,t)};var p="[CDATA[",h="DOCTYPE",a="http://www.w3.org/XML/1998/namespace",c="http://www.w3.org/2000/xmlns/",f={xml:a,xmlns:c},d=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,y=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,m=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,g=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function w(t){return" "===t||"\n"===t||"\r"===t||"\t"===t}function v(t){return'"'===t||"'"===t}function T(t,e){return t.test(e)}var E,b,t,D=0;for(var e in u.STATE={BEGIN:D++,BEGIN_WHITESPACE:D++,TEXT:D++,TEXT_ENTITY:D++,OPEN_WAKA:D++,SGML_DECL:D++,SGML_DECL_QUOTED:D++,DOCTYPE:D++,DOCTYPE_QUOTED:D++,DOCTYPE_DTD:D++,DOCTYPE_DTD_QUOTED:D++,COMMENT_STARTING:D++,COMMENT:D++,COMMENT_ENDING:D++,COMMENT_ENDED:D++,CDATA:D++,CDATA_ENDING:D++,CDATA_ENDING_2:D++,PROC_INST:D++,PROC_INST_BODY:D++,PROC_INST_ENDING:D++,OPEN_TAG:D++,OPEN_TAG_SLASH:D++,ATTRIB:D++,ATTRIB_NAME:D++,ATTRIB_NAME_SAW_WHITE:D++,ATTRIB_VALUE:D++,ATTRIB_VALUE_QUOTED:D++,ATTRIB_VALUE_CLOSED:D++,ATTRIB_VALUE_UNQUOTED:D++,ATTRIB_VALUE_ENTITY_Q:D++,ATTRIB_VALUE_ENTITY_U:D++,CLOSE_TAG:D++,CLOSE_TAG_SAW_WHITE:D++,SCRIPT:D++,SCRIPT_ENDING:D++},u.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},u.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(u.ENTITIES).forEach(function(t){var e=u.ENTITIES[t],n="number"==typeof e?String.fromCharCode(e):e;u.ENTITIES[t]=n}),u.STATE)u.STATE[u.STATE[e]]=e;function _(t,e,n){t[e]&&t[e](n)}function I(t,e,n){t.textNode&&N(t),_(t,e,n)}function N(t){t.textNode=A(t.opt,t.textNode),t.textNode&&_(t,"ontext",t.textNode),t.textNode=""}function A(t,e){return t.trim&&(e=e.trim()),t.normalize&&(e=e.replace(/\s+/g," ")),e}function x(t,e){return N(t),t.trackPosition&&(e+="\nLine: "+t.line+"\nColumn: "+t.column+"\nChar: "+t.c),e=new Error(e),t.error=e,_(t,"onerror",e),t}function O(t){return t.sawRoot&&!t.closedRoot&&C(t,"Unclosed root tag"),t.state!==D.BEGIN&&t.state!==D.BEGIN_WHITESPACE&&t.state!==D.TEXT&&x(t,"Unexpected end"),N(t),t.c="",t.closed=!0,_(t,"onend"),i.call(t,t.strict,t.opt),t}function C(t,e){if("object"!=typeof t||!(t instanceof i))throw new Error("bad call to strictFail");t.strict&&x(t,e)}function P(t){t.strict||(t.tagName=t.tagName[t.looseCase]());var e=t.tags[t.tags.length-1]||t,n=t.tag={name:t.tagName,attributes:{}};t.opt.xmlns&&(n.ns=e.ns),t.attribList.length=0,I(t,"onopentagstart",n)}function S(t,e){var n=t.indexOf(":")<0?["",t]:t.split(":"),r=n[0],i=n[1];return e&&"xmlns"===t&&(r="xmlns",i=""),{prefix:r,local:i}}function L(t){if(t.strict||(t.attribName=t.attribName[t.looseCase]()),-1!==t.attribList.indexOf(t.attribName)||t.tag.attributes.hasOwnProperty(t.attribName))t.attribName=t.attribValue="";else{if(t.opt.xmlns){var e=S(t.attribName,!0),n=e.prefix,r=e.local;if("xmlns"===n)if("xml"===r&&t.attribValue!==a)C(t,"xml: prefix must be bound to "+a+"\nActual: "+t.attribValue);else if("xmlns"===r&&t.attribValue!==c)C(t,"xmlns: prefix must be bound to "+c+"\nActual: "+t.attribValue);else{var i=t.tag,o=t.tags[t.tags.length-1]||t;i.ns===o.ns&&(i.ns=Object.create(o.ns)),i.ns[r]=t.attribValue}t.attribList.push([t.attribName,t.attribValue])}else t.tag.attributes[t.attribName]=t.attribValue,I(t,"onattribute",{name:t.attribName,value:t.attribValue});t.attribName=t.attribValue=""}}function F(e,t){if(e.opt.xmlns){var n=e.tag,r=S(e.tagName);n.prefix=r.prefix,n.local=r.local,n.uri=n.ns[r.prefix]||"",n.prefix&&!n.uri&&(C(e,"Unbound namespace prefix: "+JSON.stringify(e.tagName)),n.uri=r.prefix);var i=e.tags[e.tags.length-1]||e;n.ns&&i.ns!==n.ns&&Object.keys(n.ns).forEach(function(t){I(e,"onopennamespace",{prefix:t,uri:n.ns[t]})});for(var o=0,s=e.attribList.length;o<s;o++){var a=e.attribList[o],c=a[0],u=a[1],l=S(c,!0),p=l.prefix,h=l.local,f=""===p?"":n.ns[p]||"",d={name:c,value:u,prefix:p,local:h,uri:f};p&&"xmlns"!==p&&!f&&(C(e,"Unbound namespace prefix: "+JSON.stringify(p)),d.uri=p),e.tag.attributes[c]=d,I(e,"onattribute",d)}e.attribList.length=0}e.tag.isSelfClosing=!!t,e.sawRoot=!0,e.tags.push(e.tag),I(e,"onopentag",e.tag),t||(e.noscript||"script"!==e.tagName.toLowerCase()?e.state=D.TEXT:e.state=D.SCRIPT,e.tag=null,e.tagName=""),e.attribName=e.attribValue="",e.attribList.length=0}function R(n){if(!n.tagName)return C(n,"Weird empty close tag."),n.textNode+="</>",void(n.state=D.TEXT);if(n.script){if("script"!==n.tagName)return n.script+="</"+n.tagName+">",n.tagName="",void(n.state=D.SCRIPT);I(n,"onscript",n.script),n.script=""}var t=n.tags.length,e=n.tagName;n.strict||(e=e[n.looseCase]());for(var r=e;t--;){if(n.tags[t].name===r)break;C(n,"Unexpected close tag")}if(t<0)return C(n,"Unmatched closing tag: "+n.tagName),n.textNode+="</"+n.tagName+">",void(n.state=D.TEXT);n.tagName=e;for(var i=n.tags.length;i-- >t;){var o=n.tag=n.tags.pop();n.tagName=n.tag.name,I(n,"onclosetag",n.tagName);var s={};for(var a in o.ns)s[a]=o.ns[a];var c=n.tags[n.tags.length-1]||n;n.opt.xmlns&&o.ns!==c.ns&&Object.keys(o.ns).forEach(function(t){var e=o.ns[t];I(n,"onclosenamespace",{prefix:t,uri:e})})}0===t&&(n.closedRoot=!0),n.tagName=n.attribValue=n.attribName="",n.attribList.length=0,n.state=D.TEXT}function M(t){var e,n=t.entity,r=n.toLowerCase(),i="";return t.ENTITIES[n]?t.ENTITIES[n]:t.ENTITIES[r]?t.ENTITIES[r]:("#"===(n=r).charAt(0)&&(i="x"===n.charAt(1)?(n=n.slice(2),(e=parseInt(n,16)).toString(16)):(n=n.slice(1),(e=parseInt(n,10)).toString(10))),n=n.replace(/^0+/,""),isNaN(e)||i.toLowerCase()!==n?(C(t,"Invalid character entity"),"&"+t.entity+";"):String.fromCodePoint(e))}function U(t,e){"<"===e?(t.state=D.OPEN_WAKA,t.startTagPosition=t.position):w(e)||(C(t,"Non-whitespace before first tag."),t.textNode=e,t.state=D.TEXT)}function k(t,e){var n="";return e<t.length&&(n=t.charAt(e)),n}D=u.STATE,String.fromCodePoint||(E=String.fromCharCode,b=Math.floor,t=function(){var t,e,n=[],r=-1,i=arguments.length;if(!i)return"";for(var o="";++r<i;){var s=Number(arguments[r]);if(!isFinite(s)||s<0||1114111<s||b(s)!==s)throw RangeError("Invalid code point: "+s);s<=65535?n.push(s):(t=55296+((s-=65536)>>10),e=s%1024+56320,n.push(t,e)),(r+1===i||16384<n.length)&&(o+=E.apply(null,n),n.length=0)}return o},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:t,configurable:!0,writable:!0}):String.fromCodePoint=t)}(e)},function(t,e){t.exports=require("stream")},function(t,e){t.exports=require("string_decoder")},function(t,e){t.exports=require("events")},function(t,e){(function(){"use strict";e.stripBOM=function(t){return"\ufeff"===t[0]?t.substring(1):t}}).call(this)},function(t,e){t.exports=require("timers")},function(t,e,n){"use strict";function c(t,e){if(!t||!t.StreamIndex)throw new Error("No SmoothStreamingMedia or StreamIndex in manifest.");var n,p,h,r=t.$,i=r.IsLive,o=r.DVRWindowLength,s=r.TimeScale;if("TRUE"!==i||null==o||null==s)throw new Error("Content is not live.");return{defectInfos:{dvrDefectInfos:(n=t.StreamIndex,p=o,h=s,n.reduce(function(t,e){var n=e.$,r=e.c,i=n?n.Type:void 0,o=n?n.Name:void 0,s=n&&n.TimeScale||h;if(("video"===i||"audio"===i)&&r){var a,c=r.reduce(function(t,e){var n=e.$,r=n.d,i=n.r;return t+=(r?parseInt(r,10):void 0)*(((i?parseInt(i,10):void 0)||0)+1)},0)/s,u=parseInt(p,10)/s,l=u-c;t.push(((a={type:i,name:o,dvrWindowLength:u,contentLength:c,missingTime:l}).type=i,a))}return t},[]))}}}n.r(e);var r=n(20),i=n.n(r);var o=n(21);function u(t){return(e=t,new Promise(function(n){i.a.get(e,function(t){t.setEncoding("utf8");var e="";t.on("data",function(t){e+=t}),t.on("end",function(){n({manifest:e})}),t.on("error",function(t){n({err:t})})}).on("error",function(t){n({err:t})})})).then(function(t){var e,n=t.manifest,r=t.err;if(r)throw r;return e=n,new Promise(function(r,i){Object(o.parseString)(e,function(t,e){var n=e.SmoothStreamingMedia;t?i(t):r(n)})})});var e}var l=n(22),p=n(23);!function(){var r,t=function(t){for(var e={debugMode:!1,downloadInterval:300,manifestsPath:void 0,gapTolerance:2},n=[],r=0;r<t.length;r++)switch(t[r]){case"-p":t[r+1]?e.manifestsPath=t[r+1]:n.push({message:"Should specify a path for configuration file when using '-p' option.",isFatal:!0});break;case"-i":if(t[r+1])try{var i=parseInt(t[r+1],10);isNaN(i)?n.push({message:"Could not parse download interval. Default is 5 minutes.",isFatal:!1}):e.downloadInterval=i}catch(t){n.push({message:"Could not parse download interval. Default is 5 minutes.",isFatal:!1})}else n.push({message:"Should specify a download interval when using '-i' option. Default interval is 5 minutes.",isFatal:!1});break;case"-t":if(t[r+1])try{var o=parseInt(t[r+1],10);isNaN(o)?n.push({message:"Could not parse gap tolerance. Default is 2 seconds.",isFatal:!1}):e.gapTolerance=o}catch(t){n.push({message:"Could not parse gap tolerance. Default is 2 seconds.",isFatal:!1})}else n.push({message:"Should specify a gap tolerance when using '-t' option. Default gap tolerance is 2 seconds.",isFatal:!1});break;case"-d":case"--debug":e.debugMode=!0}return{configuration:e,errs:n}}(process.argv),i=t.configuration,e=t.errs,o=(r=i.debugMode,{error:function(t){var e=new Date;process.stdout.write("["+e+"] - [36mHSS-analyser: [31mError - "+t+"[0m\n")},info:function(t){var e=new Date;process.stdout.write("["+e+"] - [36mHSS-analyser: [0mInfo - "+t+"\n")},debug:function(t){if(r){var e=new Date;process.stdout.write("["+e+"] - [36mHSS-analyser: [33mDebug - "+t+"[0m\n")}},incrementalDebug:function(t,e){if(r){var n=new Date;process.stdout.clearLine(),process.stdout.cursorTo(0),process.stdout.write("["+n+"] - [36mHSS-analyser: [33mDebug - "+t+"[0m"+(e?"\n":""))}}});o.info("Started HSS-analyser"),i.debugMode&&o.info("Debug mode"),o.info("Assets file : "+i.manifestsPath),o.info("Polling interval : "+i.downloadInterval+" seconds"),o.info("DVR gap tolerance : "+i.gapTolerance+" seconds");for(var n=0;n<e.length;n++){var s=e[n];if(o.error(s.message),s.isFatal)return o.error("HSS-analyser stopped.")}try{if(null==i.manifestsPath)return o.error("No assets file provided."),o.error("HSS-analyser stopped.");var a=l.resolve(i.manifestsPath);p.readFile(a,function(t,e){if(t)return o.error("Could not read assets file."),void o.error("HSS-analyser stopped.");try{var n=JSON.parse(e).manifests;if(null==n)return o.error("No 'manifests' key found in manifests file."),void o.error("HSS-analyser stopped.");!function(r,s,o){var t=s.downloadInterval;try{o.info(r.length+" manifest(s) "+(1===r.length?"was":"were")+" found."),o.info("Start polling.");var a=0;!function t(e,n){e().then(function(){setTimeout(function(){t(e,n)},n)})}(function(){return new Promise(function(n){o.debug("Polling ...");var t=r.map(function(n){return u(n).then(function(t){a++,o.incrementalDebug("Loading manifests ... ["+a+"/"+r.length+"]",a===r.length);var e=new Date;return{url:n,SmoothStreamingMedia:t,date:e}}).catch(function(t){a++,o.incrementalDebug("Loading manifests ... ["+a+"/"+r.length+"]",a===r.length);var e=new Date;return{url:n,err:t.message||t,date:e}})});return Promise.all(t).then(function(t){a=0;var r,i,e=t.map(function(t){var e=t.SmoothStreamingMedia,n=t.url,r=t.err,i={url:n,err:r,date:t.date};if(r)return i;try{s.gapTolerance;var o=c(e).defectInfos;return i.defectInfos=o,i}catch(r){return i.err=r.message||r,i}});r=o,i=!1,e.forEach(function(e){var t=e.defectInfos;if(t){var n=t.dvrDefectInfos;n.forEach(function(t){0!==n.length&&(i=!0,r.error("Manifest has defect :\n   URL: "+e.url+"\n   Loading date: "+e.date+"\n   DVR Infos: \n     type: "+t.type+"\n     name: "+t.name+"\n     Missing time (seconds): "+t.missingTime+"\n     window length (seconds): "+t.dvrWindowLength+"\n     content length: (seconds): "+t.contentLength))})}e.err&&r.debug("Error while loading and/or parsing manifest :\n   URL: "+e.url+"\n   Loading date: "+e.date+"\n   Error: "+e.err)}),i||r.debug("No defects on loaded manifests."),n()})})},1e3*t)}catch(t){return o.error("Could not parse assets file."),o.error("HSS-analyser stopped.")}}(n,i,o)}catch(t){return o.error("JSON is not correclty formatted."),void o.error("HSS-analyser stopped.")}})}catch(s){return o.error("Undefined error: "+s.message||!1),o.error("HSS-analyser stopped.")}}()}]);